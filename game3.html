<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>ConceptNet Project</title>

  <!-- CSS Stylesheets -->
  <!-- Boostrap CSS only -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <!-- <link rel="stylesheet" href="/css/main.css"> -->

</head>

<body>

  <nav class="navbar navbar-expand-sm navbar-light rounded">

    <ul class="nav navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="home.html">Home</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="consult.html">Consult</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="game1.html">True or False</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="game2.html">Instruction</a>
      </li>

      <li class="nav-item active">
        <a class="nav-link" href="game3.html">Who am I</a>
      </li>
    </ul>

  </nav>

  <!-- Title description -->

  <section id="title">

    <div class="container-fluid">

      <hr>

      <div class="row firstcontainer">
        <h2 class="big-heading mouvement">ConceptNet</h2>
      </div>
      
      <hr>

    </div>

  </section>

  <!-- Tables -->

  <div class="container-fluid">

    <p>If you see this message, the JSON can't be loaded because of CORS, you must set a live-server. If you have, then please be patient for it to load</p>
    
    <h3>Timer</h3>
    <input type="button" id="btnStart" class="btn btn-danger" value="Start" />
    <input type="text" id="textGuess" placeholder="Guess the word">
    <input type="button" id="btnEnter" class="btn btn-danger" value="Enter" />

    <table class="table table-striped display-data">
      <tr>
      </tr>
    </table>
  
  </div>

</body>

<script src="https://code.jquery.com/jquery-3.1.1.min.js"
			  integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
			  crossorigin="anonymous"></script>
			  
<script>
  var count = 60
    
	$(document).ready(function(){

    $.getJSON('scrap.json', function(data){
      $("p").hide();
      restart()

      function restart() {
        // To uncomment when game1 is done
        // i=getRandomInt(100)
        i=0
        answer = "True"
        count = 60

        var str = '<tr>' +
          '<td>Start</td>' +
          '<td>Relation</td>' +
          '<td>End</td>' +
          '</tr>';
          
        // Decides if the hint will be at the start or at the end
        if(Math.random() <= 0.5){
          str += '<tr>' +
          '<td>' + data['start'][i] + '</td>' +
          '<td>' + data['relation'][i] + '</td>' +
          '<td>' + "???" + '</td>' +
          '</tr>';

          $("h3").html("Timer")
          $(".display-data").html("");
          $(".display-data").append(str);

        } else {
          str += '<tr>' +
          '<td>' + "???" + '</td>' +
          '<td>' + data['relation'][i] + '</td>' +
          '<td>' + data['end'][i] + '</td>' +
          '</tr>';

          $(".display-data").html("");
          $(".display-data").append(str);

        }

        $("#textGuess").hide()
        $("#btnEnter").hide()
        $("#btnStart").show()
        $(".table").hide()

       }

      $("#btnStart").click(function(){
        $("#textGuess").show()
        $("#btnEnter").show()
        $("#btnStart").hide()
        $(".table").show()
        startTimer()

      });

      // To do
      $("#btnEnter").click(function(){
        // $("#textGues")...
        // ... is right anwser? alert...
        stopTimer()
        restart()

      });
    
      function startTimer(){
        
        $("h3").html(count)
        timer = setInterval(() => {
          count --
          $("h3").html(count)
          if(count == 0){
            $("h3").html(count)
            clearInterval(timer)
            timesUp()
          }
        }, 1000)
      }

      function timesUp(){
        alert("You did not answer in time. You lost :(")
        restart()
      }

      function stopTimer(){
        clearInterval(timer)
      }

		});

  });

</script>

</html>
